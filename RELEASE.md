# Release process

## Prerequisites

* [Nim](https://nim-lang.org/) compler 1.6.6+

### Windows specific

Use the correct 32/64-bit Nim compiler & GCC toolchain to compile the 32 and
64 binaries, respectively.

The installer executable is generated by [NSIS](https://nsis.sourceforge.io)
(Nullsoft Scriptable Install System). Install NSIS first, then make sure
`makensis.exe` is available on the path.


## Prerelease checklist

Before releasing anything, make sure that:

* Everything works as expected on all platforms
* The manual has been updated
* The CHANGELOG has been updated
* Theme files have been updated (if needed)
* Example maps have been updated (if needed)
* All commits have been pushed up to the repo


## Build instructions

All commands below must be executed from the project root directory.

### 1. Update current version

Bump up the version in `CURRENT_VERSION`.


### 2. Build the manual

Note: it is important to build the manual before the release packages as the
packages include the manual.

* `nim manual`
* `nim packageManual`


### 3. Build release packages

Every package must be built on their respective OSes.

#### Windows 32-bit

Make sure to use the 32-bit compiler chain from [here](https://nim-lang.org/install_windows.html).
Execute the following commands in the project root directory:

* `nim -f release`
* `nim packageWin32`
* `nim packageWinPortable`

#### Windows 64-bit

Make sure to use the 64-bit compiler chain from [here](https://nim-lang.org/install_windows.html).

Execute the following commands in the project root directory:

* `nim -f release`
* `nim packageWin64`
* `nim packageWinPortable`

#### macOS Intel

* `nim release`
* `nim packageMac`


### 5. Build and publish the website

* `nim site`
* `git add docs && git push`

